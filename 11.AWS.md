# 10. AWS <!-- omit in TOC -->

## 1. Crear la carpeta aws/

## 2. Crear archivo main.tf

Crear un usuario en AWS utilizando el recurso aws_iam_user

```tf
resource "aws_iam_user" "users" {
  name = <usuario>
}

resource "aws_iam_user_group_membership" "group-lab" {
  user = aws_iam_user.user.name

  groups = ["min-labs"]
}
```
> Crea el usuario y lo asigna a un grupo existente con los permisos mínimos (min-labs).
## 3. Inicializar

> Terraform auto-detecta el proveedor aws

## Configurar cliente AWS en la máquina virtual.

```vim
install aws cli
aws configure

# Ejemplo:
AWS Access Key ID []: <mi access key>
AWS Secret Access Key []: <mi secret>
Default region name []: <region, ej: us-east-1>
Default output format [None]: none
```
> La configuración se almacena en la ruta: check: ~/.aws/credentials
>
> Se alamcena **sin cifrar**, por lo tanto debe ser tratado como un archivo sensible



## Crear el archivo provider.tf
```tf
provider "aws" {
  region = "us-east-1"
}
```

> [Mas información del recurso aws](https://registry.terraform.io/providers/hashicorp/aws/latest/docs)

## Planificar y aplicar
```tf
Apply complete! Resources: 2 added, 0 changed, 0 destroyed.
```

## Probar Agregar a main.tf y aplicar
# Create a VPC
resource "aws_vpc" "example" {
  cidr_block = "10.0.0.0/16"
}
